#ifndef PCA9685_H
#define PCA9685_H

#include "stm32f1xx_hal.h"
#include <stdint.h>

typedef struct {
    I2C_HandleTypeDef *hi2c;
    uint8_t addr7;     // 7-bit address, default 0x40
    float freq_hz;     // usually 50Hz for servo
} PCA9685_t;

HAL_StatusTypeDef PCA9685_Init(PCA9685_t *dev, I2C_HandleTypeDef *hi2c, uint8_t addr7, float freq_hz);
HAL_StatusTypeDef PCA9685_SetPWM(PCA9685_t *dev, uint8_t channel, uint16_t on, uint16_t off);
HAL_StatusTypeDef PCA9685_SetServoAngle(PCA9685_t *dev, uint8_t channel, float angle_deg);

#endif
